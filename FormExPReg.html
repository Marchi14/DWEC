<!DOCTYPE html>
<html lang="es-ES">

<head>
    <meta charset="UTF-8">
    <title>EXPReg</title>
</head>

<body>
    <script>
        class Factura {
            constructor(Nombre, Apellido, Factura, Mail, Importe) {
                this.Nombre = Nombre;
                this.Apellido = Apellido;
                this.Factura = Factura;
                this.Mail = Mail;
                this.Importe = Importe;
            }

            setNombre(Nombre) {
                this.Nombre = Nombre;
            }

            setApellido(Apellido) {
                this.Apellido = Apellido;
            }

            setFactura(Factura) {
                this.Factura = Factura;
            }

            setMail(Mail) {
                this.Mail = Mail;
            }

            setImporte(Importe) {
                this.Importe = Importe;
            }
        }

        function Comprobar() {
            var flag = true;
            let nom = /^[A-Z]\D+/g;
            let ape = /^[A-Z]\D+/g;
            let fact = /\d{6}/g;
            let email = /^\w+@\D+\D+/g;
            let importe = /^\d{1,8},\d{2}$/g;
            var fac = new Factura('', '', '', '', '');
            var texto1 = document.getElementById('nom').value;
            var patron = nom.test(texto1);
            if (patron == false) {
                alert("El campo Nombre no cumple con lo requerido");
                flag = false;
            } else {
                fac.setNombre(texto1);
            }


            var texto2 = document.getElementById('ape').value;
            console.log(texto2);
            patron = ape.test(texto2);
            if (patron == false) {
                alert("El campo Apellido no cumple con lo requerido");
                flag = false;
            } else {
                fac.setApellido(texto2);
            }


            var texto3 = document.getElementById('fac').value;
            patron = fact.test(texto3);
            if (patron == false) {
                alert("El campo Nº Factura no cumple con lo requerido");
                flag = false;
            } else {
                fac.setFactura(texto3);
            }


            var texto4 = document.getElementById('email').value;
            patron = email.test(texto4);
            if (patron == false) {
                alert("El campo E-Mail no cumple con lo requerido");
                flag = false;
            } else {
                fac.setMail(texto4);
            }


            var texto5 = document.getElementById('imp').value;
            patron = importe.test(texto5);
            if (patron == false) {
                alert("El campo Importe no cumple con lo requerido");
                flag = false;
            } else {
                fac.setImporte(texto5);
            }

            if (flag) {
                var facturaJSON = JSON.stringify(fac);
                Convertir(facturaJSON);
            }
        }

        function Convertir(Fac) {
            var res = JSON.parse(Fac);
            alert("Nombre: " + res.Nombre + "\nApellido: " + res.Apellido + "\nFactura: " + res.Factura +
                "\nE-Mail: " + res.Mail + "\nImporte: " + res.Importe);
        }
    </script>
    <form>
        <label for="nom">Nombre</label>
        <input type="text" name="nom" id="nom"><br>
        <label for="ape">Apellido</label>
        <input type="text" name="ape" id="ape"><br>
        <label for="fac">Nº Factura</label>
        <input type="text" name="fac" id="fac"><br>
        <label for="email">E-Mail</label>
        <input type="text" name="email" id="email"><br>
        <label for="imp">Importe</label>
        <input type="text" name="imp" id="imp" value=",00"><br>
        <input type="button" value="Comprobar" onclick="Comprobar()">
    </form>
</body>

</html>